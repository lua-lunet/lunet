#!/bin/sh
# Repo-managed pre-commit hook: runs xmake lint and xmake check
# Setup: git config core.hooksPath .githooks
# Bypass: git commit --no-verify

set -e
echo "=== pre-commit: xmake lint ==="
xmake lint
echo "=== pre-commit: xmake check ==="
if command -v luacheck >/dev/null 2>&1; then
  xmake check
else
  echo "  (skipping luacheck - run 'xmake init' to install)"
fi
echo "=== pre-commit passed ==="
